# Implementation Readiness: Story 8.1

**See also:** [Implementation readiness for all stories](./implementation-readiness-all-stories.md).

**Story:** 8.1 — Local SQLite catalog and remove categories  
**Checked by:** Architect (Winston)  
**Date:** 2026-02-19

## Verdict: **READY**

The story is implementation-ready for the Dev agent. This is the foundational story of Epic 8: it introduces local SQLite for catalog reads, creates the database abstraction layer, defines Epic 8 TypeScript types, and removes categories from the app. All referenced architecture docs, design mockups, and source paths exist. The story is well-structured with clear tasks, source references, and schema details.

---

## 1. Architecture and reference integrity

| Check | Status | Notes |
|-------|--------|--------|
| All cited architecture docs exist | ✅ | grqaserapp-data-integration-and-audio, data-models-and-schema, source-tree, tech-stack, coding-standards, testing-and-deployment-strategy — all exist and updated for Epic 8 |
| Dev Notes match architecture content | ✅ | Local SQLite source, `catalogRepository` abstraction, `managed_databases` schema, TypeScript types, categories removal — all match architecture |
| Source references accurate | ✅ | `[Source: architecture/...]` and `[Source: docs/design/...]` point to real sections; Epic 8 additions verified |
| Phase scope correct | ✅ | Epic 8; prerequisite: Epics 3–4, 7 complete (GrqaserApp exists with full UI/UX) |

---

## 2. File and project structure

| Check | Status | Notes |
|-------|--------|--------|
| GrqaserApp src layout | ✅ | `GrqaserApp/src/` — screens, navigation, state/slices, services, types, theme, components, constants — all present |
| New `src/database/` directory | ✅ | Does not exist yet — story creates it (connection.ts, catalogRepository.ts, appMetaRepository.ts). Path aligns with architecture source-tree |
| Files to remove | ✅ | `CategoryScreen.tsx` and `CategoryCard.tsx` exist in current repo; story correctly identifies them for removal |
| Files to modify | ✅ | `booksApi.ts`, `booksSlice.ts`, `bookMapper.ts`, `HomeScreen.tsx`, `SearchScreen.tsx`, `BookDetailScreen.tsx` — all exist |
| Design mockups | ✅ | `docs/design/grqaser-app/home.html`, `book-detail.html` — present |
| Data model schemas | ✅ | Books table DDL and `managed_databases` table in `data-models-and-schema.md` — present and current |

---

## 3. Acceptance criteria and tasks

| AC | Covered by tasks | Notes |
|----|------------------|--------|
| AC1: No API for catalog | Tasks 1, 3, 6 | SQLite infrastructure created; API calls replaced with catalogRepository; Home/Search/BookDetail read from local DB |
| AC2: SQLite in app with migration path | Tasks 1, 4 | connection.ts and catalogRepository abstracted behind interface; ManagedDatabase type defined; appMetaRepository for metadata DB |
| AC3: Categories removed | Task 5 | CategoryScreen, CategoryCard removed; navigation and filters cleaned; Redux category state removed |
| AC4: No regression in browse, search, book-detail | Tasks 6, 7 | Screens updated for local DB; unit tests for repositories and slices; manual smoke test specified |

---

## 4. Technical constraints

- **New dependencies:** `react-native-sqlite-storage` (or `expo-sqlite`) and `react-native-fs` (or `expo-file-system`) — both listed in architecture tech-stack. Native link/pod install needed. Story Task 1 explicitly covers this.
- **Bundled DB file:** Story requires a default catalog DB file bundled with the app or downloaded on first launch. Dev must decide approach and document — story leaves this as an implementation choice, which is appropriate.
- **Book type `Book` already exists** in `src/types/book.ts` with `isDownloaded` field — aligns with Epic 8 needs. Task 4 adds `ManagedDatabase`, `DownloadedMp3`, `LibraryEntry`, `StorageUsage` types.
- **`booksSlice.ts` has `fetchCategories` thunk and `categories` state** — must be removed in Task 5 (story covers this).
- **`getCategories()` in `booksApi.ts`** — must be removed in Task 5 (story covers this).

---

## 5. Summary

- **Implementation readiness:** **GO** — Story 8.1 is ready for the Dev agent.
- **Dependency:** Epics 3–4, 7 complete (GrqaserApp exists with design system applied).
- **No blocking gaps.** All refs, paths, mockups, and schemas verified. Story is foundational — Stories 8.2–8.5 all depend on it. New `src/database/` directory and new Redux slices are correctly specified. Categories removal is well-scoped.
