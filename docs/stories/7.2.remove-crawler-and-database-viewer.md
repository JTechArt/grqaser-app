# Story 7.2: Remove crawler and database-viewer

## Status

Draft

## Story

**As an** operator / developer,  
**I want** the standalone crawler and database-viewer removed (or archived) and all docs and scripts to reference only books-admin-app,  
**so that** the repo has a single admin application and no confusion about which app to run.

## Acceptance Criteria

1. Standalone **crawler** and **database-viewer** top-level directories are removed (or moved to an archive path) per team policy; books-admin-app remains the only admin entrypoint and depends on crawler logic via its existing integration (e.g. package or in-process).
2. Root and CI: package.json scripts, test commands, and any CI jobs that referenced crawler or database-viewer now run or reference books-admin-app where applicable.
3. Documentation (README, runbooks, architecture, PRD) is updated to state that books-admin-app replaces crawler and database-viewer; no runbooks for running crawler or database-viewer as separate apps.
4. GrqaserApp and other consumers that use the admin API continue to point at books-admin-app (or documented equivalent); data contract and schema unchanged.

## Tasks / Subtasks

- [ ] Task 1: Remove or archive crawler and database-viewer (AC: 1)
  - [ ] Per team policy: either delete top-level `crawler/` and `database-viewer/` or move them to an archive path (e.g. `archive/crawler/`, `archive/database-viewer/`) ([Source: docs/architecture/source-tree.md]).
  - [ ] Confirm books-admin-app has no broken dependency on standalone crawler/database-viewer (crawler logic is in-process or subprocess within books-admin-app per Story 6.1) ([Source: docs/architecture/books-admin-app-architecture.md]).
  - [ ] Ensure books-admin-app remains the only admin entrypoint; document in README or architecture.
- [ ] Task 2: Update root package.json and CI (AC: 2)
  - [ ] Audit root `package.json` scripts (e.g. test, dev, start) and any workspace/CI config; replace references to crawler or database-viewer with books-admin-app where applicable ([Source: docs/architecture/source-tree.md]).
  - [ ] Update test commands and CI jobs so they run books-admin-app tests (or only GrqaserApp where appropriate); remove or redirect crawler/database-viewer-specific jobs.
  - [ ] Verify `npm test` (or equivalent) at root runs the intended suite without referencing removed dirs.
- [ ] Task 3: Update documentation (AC: 3)
  - [ ] Update root README and any runbooks to state that books-admin-app replaces crawler and database-viewer; single admin app is books-admin-app ([Source: docs/architecture/delivery-order-and-application-boundaries.md]).
  - [ ] Update docs/architecture (e.g. index.md, delivery-order, source-tree) to reflect post–Epic 7 layout: no runbooks for running crawler or database-viewer as separate apps.
  - [ ] Update PRD (or epic summaries) so delivery order and verification refer to books-admin-app only; Epic 5 runbooks reference books-admin-app.
- [ ] Task 4: GrqaserApp and consumers (AC: 4)
  - [ ] Confirm GrqaserApp (and any other consumers) point at books-admin-app API (or documented equivalent); no references to database-viewer as a separate service ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).
  - [ ] Verify data contract and schema are unchanged; document API base URL or equivalent in GrqaserApp config/docs if needed.

## Dev Notes

### Prerequisites

- Story 7.1 (parity verification) must be complete and signed off so removal is safe ([Source: docs/prd/epic-7.md], [Source: docs/architecture/delivery-order-and-application-boundaries.md]).

### Post–Epic 7 layout

- **Admin:** Only `books-admin-app/` at repo root. Optional: `archive/crawler/` and `archive/database-viewer/` if team keeps legacy code ([Source: docs/architecture/source-tree.md]).
- **Root package.json:** Scripts and CI reference books-admin-app only ([Source: docs/architecture/source-tree.md]).

### File locations

- Root: `package.json`, `README.md`.
- CI: wherever CI config lives (e.g. `.github/workflows/`, or scripts in package.json).
- Docs: `docs/architecture/*.md`, `docs/prd/epic-5.md` (runbooks/verification), root README.
- GrqaserApp: config or env for API base (e.g. `GrqaserApp/src/config/` or env); no schema changes.

### Technical constraints

- Data contract and schema unchanged. GrqaserApp continues to consume the same API ([Source: docs/architecture/delivery-order-and-application-boundaries.md]).
- If books-admin-app currently invokes crawler as subprocess from `crawler/`, either move crawler code into books-admin-app or retain a copy under `archive/crawler/` and point subprocess at archive path until in-process migration is done; story assumes books-admin-app already has crawler integration per Epic 6.

### Testing

- Smoke test: root scripts run; books-admin-app starts and serves API; GrqaserApp (if runnable) still reaches API. No automated test changes required unless CI referenced removed dirs ([Source: docs/architecture/testing-and-deployment-strategy.md]).

## Change Log

| Date       | Version | Description                    | Author       |
|-----------|---------|--------------------------------|--------------|
| 2025-02-17 | 1.0     | Story created from Epic 7      | Scrum Master |

## Dev Agent Record

### Agent Model Used

_(Populated by dev agent)_

### Debug Log References

_(Populated by dev agent)_

### Completion Notes List

_(Populated by dev agent)_

### File List

_(Populated by dev agent)_

## QA Results

_(Populated by QA agent)_
