# Story 4.2: Background playback and controls

## Status

Draft

## Story

**As a** user,  
**I want** playback to continue in the background with lock-screen/notification controls,  
**so that** I can use other apps or lock the device while listening.

## Acceptance Criteria

1. Audio continues when the app is in the background; interruptions (e.g., calls) are handled.
2. Lock-screen (iOS) and notification (Android) controls work for play/pause and optionally seek.
3. Playback resumes appropriately after interruptions.

## Tasks / Subtasks

- [ ] Task 1: Background playback (AC: 1)
  - [ ] Configure so audio continues when app is in background ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md], [Source: docs/architecture/tech-stack.md] — react-native-track-player).
  - [ ] Handle interruptions (e.g. phone calls); pause or duck and resume per platform behavior.
- [ ] Task 2: Lock-screen and notification controls (AC: 2)
  - [ ] Enable lock-screen (iOS) and notification (Android) controls for play/pause and optionally seek ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).
  - [ ] Configure per platform (iOS/Android) as required by the playback library.
- [ ] Task 3: Resume after interruptions (AC: 3)
  - [ ] Ensure playback resumes appropriately after interruptions (e.g. call ended, app foregrounded) ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).
  - [ ] Test on both iOS and Android.

## Dev Notes

### Previous Story Insights

Story 4.1 delivers core player (play/pause, seek, progress/duration). This story adds background and system controls; Story 4.3 adds progress persistence and preferences.

### Technical Constraints

- react-native-track-player (or equivalent); background and lock-screen behavior configured per platform ([Source: docs/architecture/tech-stack.md], [Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).

### File Locations

- **Player config:** Wherever track-player and background/notification are configured (e.g. `GrqaserApp/src/` services or app entry). **State:** audio slice ([Source: docs/architecture/source-tree.md]).

### Testing

- Manual testing on iOS and Android for background, lock-screen, and interruption resume ([Source: docs/architecture/testing-and-deployment-strategy.md]). E2E for critical path where feasible.

## Change Log

| Date       | Version | Description                    | Author       |
|-----------|---------|--------------------------------|--------------|
| 2025-02-14 | 1.0     | Story created from Epic 4     | Scrum Master |

## Dev Agent Record

### Agent Model Used

—

### Debug Log References

—

### Completion Notes List

—

### File List

—

## QA Results

—
