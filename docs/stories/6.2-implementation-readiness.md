# Implementation Readiness: Story 6.2

**See also:** [Implementation readiness for all stories](./implementation-readiness-all-stories.md).

**Story:** 6.2 — Database versioning and active/backup  
**Checked by:** Architect (Winston)  
**Date:** 2025-02-16

## Verdict: **READY**

The story is implementation-ready for the Dev agent. Architecture defines DB versioning (db.{version}, one active, backups), list/set-active/delete; Story 6.1 provides the app to extend.

---

## 1. Architecture and reference integrity

| Check | Status | Notes |
|-------|--------|--------|
| All cited architecture docs exist | ✅ | books-admin-app-architecture, data-models-and-schema, crawler-pipeline, database-viewer-api, epic-6, testing-and-deployment-strategy |
| Dev Notes match architecture content | ✅ | db.{version}; one active; crawler writes to active; data view reads from active; promote backup, delete backup |
| Source references accurate | ✅ | `[Source: docs/architecture/...]` and story refs point to real sections |
| Phase scope correct | ✅ | Builds on 6.1; schema unchanged; only path/active selection changes |

---

## 2. File and project structure

| Check | Status | Notes |
|-------|--------|--------|
| Implementation location | ✅ | Within `books-admin-app/`: config or registry for active + backups; API routes; UI for DB management |
| Data layer | ✅ | Reuse viewer data layer pointed at active path; crawler receives active path from config/registry |
| No new top-level app | ✅ | All work under books-admin-app (assumes 6.1 done) |

---

## 3. Acceptance criteria and tasks

| AC | Covered by tasks | Notes |
|----|------------------|--------|
| AC1: db.{version} supported; user can set active path | Task 1, 4 | Path naming; persist active path; expose in UI/API |
| AC2: Only one DB active at a time | Task 1 | Enforce in model/registry; all others backups |
| AC3: Crawler writes to active; data view reads active | Task 2 | Wire both to current active path; behavior on path change documented |
| AC4: Promote backup to active; delete backup | Task 3 | Set active; delete backup only; validate (no delete active) |
| AC5: UI or API: list DBs, set active, delete backup | Task 4 | Expose list, set active, delete backup; consistent use of active path |

---

## 4. Technical constraints

- Only one active DB at a time. Prevent deleting active or require explicit flow. Crawler and viewer must use same DB for normal operation. Persist “active” across restarts (config or metadata file) — [books-admin-app-architecture.md](../architecture/books-admin-app-architecture.md), [docs/prd/epic-6.md](../prd/epic-6.md).

---

## 5. Summary

- **Implementation readiness:** **GO** — Story 6.2 is ready for the Dev agent.  
- **Dependency:** Story 6.1 (books-admin-app exists; single process, config externalized).  
- **No blocking gaps.** All refs and constraints clear.
