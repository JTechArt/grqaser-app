# Story 4.1: Core audio player

## Status

Draft

## Story

**As a** user,  
**I want** to play, pause, seek, and see progress and duration,  
**so that** I can listen to audiobooks with standard controls.

## Acceptance Criteria

1. Playback uses the audio URLs from the crawler-backed data.
2. Play/pause, seek, and progress/duration display work correctly.
3. Player UI (full-screen or mini) is clear and responsive.

## Tasks / Subtasks

- [ ] Task 1: Playback from crawler URLs (AC: 1)
  - [ ] Use audio URLs from crawler-backed data (book’s main_audio_url or equivalent) for playback ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md], [Source: docs/architecture/data-models-and-schema.md]).
  - [ ] Integrate with react-native-track-player (or equivalent) per tech stack ([Source: docs/architecture/tech-stack.md]).
- [ ] Task 2: Play/pause, seek, progress/duration (AC: 2)
  - [ ] Implement play/pause, seek, and progress/duration display; ensure they work correctly ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).
  - [ ] Wire player state to Redux audio slice if applicable.
- [ ] Task 3: Player UI (AC: 3)
  - [ ] Implement player UI (full-screen and/or mini) that is clear and responsive ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).
  - [ ] Connect UI to player state (play/pause, seek, progress, duration).

## Dev Notes

### Previous Story Insights

Epic 4 depends on Epic 3. Home and Book detail (3.4) are ready for "Play"; this story adds the core player using the same crawler-backed audio URLs.

### Data Models

- **Book** main_audio_url (and download_url if used) from crawler schema ([Source: docs/architecture/data-models-and-schema.md]). Audio stack: react-native-track-player; play/pause, seek, progress, duration ([Source: docs/architecture/grqaserapp-data-integration-and-audio.md]).

### File Locations

- **Screens/components:** `GrqaserApp/src/screens/` (player screen/components). **State:** audio slice in `GrqaserApp/src/state/` ([Source: docs/architecture/source-tree.md]).

### Technical Constraints

- react-native-track-player (or equivalent) for streaming; iOS and Android single codebase ([Source: docs/architecture/tech-stack.md]). Handle playback errors with clear user feedback ([Source: docs/architecture/coding-standards.md]).

### Testing

- Unit/integration for player logic; E2E for "play a book" where feasible ([Source: docs/architecture/testing-and-deployment-strategy.md]). Run: `npm test` from `GrqaserApp/`.

## Change Log

| Date       | Version | Description                    | Author       |
|-----------|---------|--------------------------------|--------------|
| 2025-02-14 | 1.0     | Story created from Epic 4     | Scrum Master |

## Dev Agent Record

### Agent Model Used

—

### Debug Log References

—

### Completion Notes List

—

### File List

—

## QA Results

—
